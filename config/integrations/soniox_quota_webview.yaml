integrations:
    - id: soniox_dashboard_webview
      name: "Soniox Dashboard (WebView)"
      description: "é™é»˜ä»åå°è·å– Soniox ä»ªè¡¨æ¿è´¦å•æ•°æ®ï¼Œæ— éœ€å¤åˆ¶ Token æˆ–æŠ“åŒ…ï¼Œæ›´å®‰å…¨ç¨³å®šã€‚"

      flow:
          # ç›´æ¥ä½¿ç”¨ webview æ‹¦æˆªå™¨ï¼Œæ— éœ€äººå·¥ä»‹å…¥
          - id: webview_fetch
            use: webview
            args:
                url: "https://console.soniox.com/"
                intercept_api: "/dashboard/"
                script: "" # ä½¿ç”¨å†…ç½®çš„é™æ€èµ„æºé˜»æ–­å’Œæ‹¦æˆªå™¨å³å¯
            outputs:
                webview_data: "dashboard_response"

          - id: parse_billing
            use: extract
            args:
                source: "{dashboard_response}"
                type: "jsonpath"
                expr: "$.billing.available_balance_usd"
            outputs:
                available_balance: "available_balance"

          - id: parse_usage
            use: extract
            args:
                source: "{dashboard_response}"
                type: "jsonpath"
                expr: "$.mtd_usage.total_paid_amount_usd"
            outputs:
                total_usage: "total_usage"

      templates:
          - label: "Soniox Quota (WebView Mode)"
            type: "source_card"
            ui:
                title: "Soniox"
                icon: "ğŸ™ï¸"
            widgets:
                - type: "hero_metric"
                  amount: "{available_balance}"
                  currency: "USD"
                - type: "key_value_grid"
                  items:
                      "Month Usage": "${total_usage}"
